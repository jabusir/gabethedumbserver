(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{229:function(e,t){e.exports=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}},236:function(e,t,r){!function(e,t,r,s){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function a(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach((function(r){s(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function i(e){var t=e.srcList,s=e.imgPromise,n=void 0===s?c({decode:!0}):s,i=e.useSuspense,o=void 0===i||i,p=r.useState(!0)[1],g=l(u(t)),b=g.join("");if(d[b]||(d[b]={promise:h(g,n),cache:"pending",error:null}),d[b].promise.then((function(e){d[b]=a(a({},d[b]),{},{cache:"resolved",src:e}),o||p(!1)})).catch((function(e){d[b]=a(a({},d[b]),{},{cache:"rejected",error:e}),o||p(!1)})),"resolved"===d[b].cache)return{src:d[b].src,isLoading:!1,error:null};if("rejected"===d[b].cache){if(o)throw d[b].error;return{isLoading:!1,error:d[b].error,src:void 0}}if(o)throw d[b].promise;return{isLoading:!0,src:void 0,error:null}}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var o="default"in r?r.default:r;s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;var c=function(e){var t=e.decode,r=e.crossOrigin,s=void 0===r?"":r;return function(e){return new Promise((function(r,n){var a=new Image;s&&(a.crossOrigin=s),a.onload=function(){(void 0===t||t)&&a.decode?a.decode().then(r).catch(n):r()},a.onerror=n,a.src=e}))}},l=function(e){return e.filter((function(e){return e}))},u=function(e){return Array.isArray(e)?e:[e]},d={},h=function(e,t){var r=!1;return new Promise((function(s,n){var a=function(e){return t(e).then((function(){r=!0,s(e)}))};e.reduce((function(e,t){return e.catch((function(){if(!r)return a(t)}))}),a(e.shift())).catch(n)}))},p=function(e){return e};e.Img=function(e){var r=e.decode,s=e.src,n=void 0===s?[]:s,a=e.loader,l=void 0===a?null:a,u=e.unloader,d=void 0===u?null:u,h=e.container,g=void 0===h?p:h,b=e.loaderContainer,j=void 0===b?p:b,f=e.unloaderContainer,O=void 0===f?p:f,m=e.imgPromise,v=e.crossorigin,x=e.useSuspense,y=void 0!==x&&x,w=t(e,["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"]),R=i({srcList:n,imgPromise:m=m||c({decode:!(void 0!==r)||r,crossOrigin:v}),useSuspense:y}),S=R.src,C=R.isLoading;return S?g(o.createElement("img",Object.assign({src:S},w))):!y&&C?j(l):!y&&d?O(d):null},e.useImage=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(229),r(0),r(125))},251:function(e,t,r){"use strict";r.r(t);var s=r(12),n=r(10),a=r(1),i=r(55),o=r(51),c=r(0),l=r(6),u=r(236),d=r(25),h=r.n(d),p=r(9),g=r(26),b=r(131),j=r(8),f=r(20),O=r(2);class m extends c.Component{constructor(e){super(e),Object(s.a)(this,"onCancel",()=>{this.props.onChange(this.originalFile),this.setState({changeStatus:this.originalFile?"stored":"empty",dataURI:null,errorMessage:null})}),Object(s.a)(this,"onRemove",()=>{this.setState({changeStatus:"removed",errorMessage:null}),this.props.onChange(null)}),Object(s.a)(this,"onChange",({target:{validity:e,files:[t]}})=>{if(!t)return;const{errorMessage:r,onChange:s}=this.props,n={changeStatus:"updated"};e.valid?(t.type.includes("image")?(this.getDataURI(t),n.oldImagePath=this.getImagePath()):this.state.dataURI&&this.setState({dataURI:null,errorMessage:null}),s(t),this.setState(n)):this.setState({errorMessage:r({type:"save"})})}),Object(s.a)(this,"openFileBrowser",()=>{this.inputRef&&this.inputRef.click()}),Object(s.a)(this,"getFile",()=>{const{value:e}=this.props,{changeStatus:t}=this.state,r="removed"===t?this.originalFile:e;return{file:r,type:r&&r.__typename?"server":"client"}}),Object(s.a)(this,"getDataURI",e=>{const{errorMessage:t}=this.props,r=new FileReader;r.readAsDataURL(e),r.onloadstart=()=>{this.setState({isLoading:!0})},r.onerror=e=>{console.error("Error with Cloudinary preview",e),this.setState({errorMessage:t({type:"preview"})})},r.onloadend=e=>{this.setState({isLoading:!1,dataURI:e.target.result})}}),Object(s.a)(this,"getImagePath",()=>{const{dataURI:e}=this.state,{file:t}=this.getFile();return t&&t.mimetype&&t.mimetype.includes("image")?t.publicUrl:e}),Object(s.a)(this,"getInputRef",e=>{this.inputRef=e}),Object(s.a)(this,"renderUploadButton",()=>{const{uploadButtonLabel:e,isDisabled:t}=this.props,{changeStatus:r,isLoading:s}=this.state;return Object(a.jsx)(j.c,{onClick:this.openFileBrowser,isLoading:s,variant:"ghost",isDisabled:t},e({status:r}))}),Object(s.a)(this,"renderCancelButton",()=>{const{cancelButtonLabel:e,isDisabled:t}=this.props,{changeStatus:r}=this.state;let s="warning",n=this.onRemove;switch(r){case"removed":s="primary",n=this.onCancel;break;case"updated":n=this.onCancel}return Object(a.jsx)(j.a,{onClick:n,variant:"subtle",appearance:s,isDisabled:t},e({status:r}))});const{value:t}=e;this.originalFile=t;const r=this.originalFile?"stored":"empty";this.state={changeStatus:r,dataURI:null,errorMessage:null,isLoading:!1,oldImagePath:null}}render(){const{autoFocus:e,field:t,statusMessage:r,errors:s,isDisabled:n}=this.props,{changeStatus:c,errorMessage:l}=this.state,{file:u}=this.getFile(),d=this.getImagePath(),h=["removed","updated"].includes(c),p="ks-input-"+t.path;return Object(a.jsx)(i.a,null,Object(a.jsx)(i.d,{htmlFor:p,field:t,errors:s}),Object(a.jsx)(i.b,{text:t.adminDoc}),Object(a.jsx)(i.c,null,u?Object(a.jsx)(v,null,d&&Object(a.jsx)(P,{src:d,alt:t.path}),Object(a.jsx)(x,null,Object(a.jsx)(f.d,{style:{marginBottom:O.d}},this.renderUploadButton(),this.renderCancelButton()),l?Object(a.jsx)(w,null,l):Object(a.jsx)(f.d,{isInline:!0,growIndexes:[0]},Object(a.jsx)(y,{href:u.publicUrl},u.filename||u.name),h?Object(a.jsx)(S,{status:c},r({status:c})):null))):this.renderUploadButton(),Object(a.jsx)(o.b,{autoComplete:"off",autoFocus:e,id:p,ref:this.getInputRef,name:t.path,onChange:this.onChange,type:"file",disabled:n})))}}Object(s.a)(m,"propTypes",{cancelButtonLabel:h.a.func.isRequired,disabled:h.a.bool,errorMessage:h.a.func.isRequired,field:h.a.object,onChange:h.a.func.isRequired,statusMessage:h.a.func.isRequired,uploadButtonLabel:h.a.func.isRequired}),Object(s.a)(m,"defaultProps",{cancelButtonLabel:function({status:e}){switch(e){case"stored":return"Remove File";case"removed":return"Undo Remove";case"updated":default:return"Cancel"}},errorMessage:function({type:e}){switch(e){case"save":return"Something went wrong, please reload and try again.";case"preview":return"Something went wrong, please try again."}},statusMessage:function({status:e}){switch(e){case"removed":return"save to remove";case"updated":return"save to upload"}},uploadButtonLabel:function({status:e}){return"empty"===e?"Upload File":"Change File"}});const v=e=>Object(a.jsx)("div",Object(l.a)({css:{alignItems:"flex-start",display:"flex"}},e)),x=e=>Object(a.jsx)("div",Object(l.a)({css:{flex:1,minWidth:0}},e)),y=e=>Object(a.jsx)(b.a,Object(l.a)({crop:"right"},e)),w=e=>{let{children:t}=e,r=Object(n.a)(e,["children"]);return Object(a.jsx)(b.a,Object(l.a)({style:{backgroundColor:O.b.R.L80,borderColor:"transparent",color:O.b.R.D20,display:"inline-flex"}},r),Object(a.jsx)(p.a,{css:{marginRight:O.d}}),t)},R={default:"primary",removed:"danger",updated:"create"},S=e=>{let{status:t="default"}=e,r=Object(n.a)(e,["status"]);const s=R[t];return Object(a.jsx)(b.a,Object(l.a)({appearance:s},r))},C=({src:e,alt:t})=>{const{src:r}=Object(u.useImage)({srcList:e});return Object(a.jsx)("img",{css:{display:"block",height:"auto",maxWidth:"100%"},src:r,alt:t})},P=e=>Object(a.jsx)("div",{css:{backgroundColor:"white",borderRadius:O.a,border:"1px solid "+O.b.N20,flexShrink:0,marginRight:O.d,padding:"4px",position:"relative",textAlign:"center",width:130}},Object(a.jsx)(I,null,Object(a.jsx)(c.Suspense,{fallback:Object(a.jsx)(g.a,null)},Object(a.jsx)(C,e))));class I extends c.Component{constructor(...e){super(...e),Object(s.a)(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?Object(a.jsx)("div",{css:{padding:"4px 0",color:O.b.N40}},Object(a.jsx)("div",null,Object(a.jsx)(p.g,null)),Object(a.jsx)("span",{css:{fontSize:"0.9em"}},"Could not load image")):this.props.children}}t.default=m}}]);